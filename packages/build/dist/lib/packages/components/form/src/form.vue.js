"use strict";const e=require("vue"),k=require("./form.js"),q=require("../../../utils/create.js"),z=require("../../../utils/is.js"),j=e.defineComponent({name:"tl-form",__name:"form",props:{model:{},id:{},rules:{},labelWidth:{default:116},layout:{default:"horizontal"},size:{default:"m"},disabled:{type:Boolean,default:!1}},setup(d,{expose:u}){const n=q.createNamespace("form"),r={},f=d,{model:m,disabled:p,rules:h,labelWidth:b,size:i,layout:a}=e.toRefs(f),v=async t=>{const o=[];let s={};return Object.keys(r).forEach(l=>{o.push(r[l].validate())}),Promise.all(o).then(l=>(l.forEach(c=>{c&&(s={...s,...c.fields})}),z.isFunction(t)&&t(),Object.keys(s).length==0?!0:s))},y=t=>{const o=t.field;r[o]=t},_=t=>{delete r[t]},E=()=>{Object.keys(r).forEach(t=>{r[t].resetField()})},F=t=>{};return e.provide(k.formContextKey,e.reactive({model:m,labelWidth:b,disabled:p,size:i,layout:a,rules:h,addField:y,removeField:_})),u({validate:v,resetFields:E}),(t,o)=>(e.openBlock(),e.createElementBlock("form",{class:e.normalizeClass([e.unref(n).b(),e.unref(n).m(e.unref(a)),e.unref(n).m(e.unref(i))]),onSubmit:e.withModifiers(F,["prevent"])},[e.renderSlot(t.$slots,"default")],34))}});module.exports=j;

"use strict";const e=require("vue"),S=require("../../../utils/create.js"),y=require("./pagination.js"),k=require("./pager.vue.js"),d=require("./control.vue.js"),x=require("./jumper.vue.js"),B=require("./page-size.vue.js"),P=require("../../input-number/index.js"),q=e.defineComponent({__name:"pagination",props:{total:{},current:{default:1},pageSize:{default:10},defaultCurrent:{default:1},defaultPageSize:{default:10},pageSizeOptions:{default:()=>[10,20,30,40,50]},pagerCount:{default:7},size:{},layouts:{default:()=>["prev","pager","next"]},prevIcon:{},nextIcon:{},simple:{type:Boolean,default:!1},fixWidth:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hideOnSinglePage:{type:Boolean,default:!1}},emits:["change","pageSizeChange","update:current","update:pageSize"],setup(m,{emit:_}){const l=S.createNamespace("pagination"),a=m,r=_,n=e.ref(a.defaultCurrent),o=e.ref(a.defaultPageSize),i=e.computed(()=>Math.ceil(a.total/o.value)),z=e.computed(()=>a.hideOnSinglePage&&i.value===1),c=e.computed(()=>n.value===1),v=e.computed(()=>n.value===i.value),s=e.computed(()=>a.size??"m");e.provide(y.PaginationContextKey,{_current:n,_pageSize:o,lastPage:i,isFirstPage:c,isLastPage:v,size:s});const b={pager:e.h(k,{pagerCount:a.pagerCount,fixWidth:a.fixWidth}),prev:e.h(d,{icon:"prev",onClick:g}),next:e.h(d,{icon:"next",onClick:f}),total:e.h("div",null,`共${a.total}条`),jumper:e.h(x),pageSize:e.h(B,{pageSizeOptions:a.pageSizeOptions,"onUpdate:pageSize":t=>{a.disabled||(o.value=t)}})},h=a.layouts.reduce((t,u)=>(t[u]=b[u],t),{});e.watch(()=>a.current,t=>{n.value=t}),e.watch(n,t=>{r("update:current",t),r("change",t)}),e.watch(()=>a.pageSize,t=>o.value=t),e.watch(o,t=>{r("update:pageSize",t),r("pageSizeChange",t)});function g(){!a.disabled&&n.value>1&&n.value--}function f(){!a.disabled&&n.value<i.value&&n.value++}return(t,u)=>t.simple?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass([e.unref(l).b(),e.unref(l).m(s.value),e.unref(l).is("disabled",t.disabled)])},[e.createVNode(d,{icon:"prev",disabled:c.value,onClick:g},null,8,["disabled"]),e.createVNode(e.unref(P),{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=p=>n.value=p),min:1,max:i.value,controls:!1,size:s.value},null,8,["modelValue","max","size"]),u[1]||(u[1]=e.createTextVNode(" / ")),e.createElementVNode("div",{class:e.normalizeClass(e.unref(l).e("total"))},e.toDisplayString(i.value),3),e.createVNode(d,{icon:"next",disabled:v.value,onClick:f},null,8,["disabled"])],2)):z.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass([e.unref(l).b(),e.unref(l).m(s.value),e.unref(l).is("disabled",t.disabled)])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Object.entries(e.unref(h)),([p,C])=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(C),{key:p,disabled:t.disabled},null,8,["disabled"]))),128))],2))}});module.exports=q;

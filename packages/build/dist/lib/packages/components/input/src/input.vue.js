"use strict";const e=require("vue"),G=require("../../../utils/hooks/use-form-item.js"),J=require("../../../utils/create.js"),V=require("../../icon/index.js"),O=["id","name","placeholder","disabled","readonly","required","type","value","aria-disabled"],Q={key:0},U=e.defineComponent({name:"tl-input",__name:"input",props:{id:{},name:{},size:{default:"m"},type:{default:"text"},placeholder:{},modelValue:{default:""},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},visible:{type:Boolean,default:!0},status:{default:"primary"},loading:{type:Boolean,default:!1},showCounter:{type:Boolean,default:!1},limit:{default:-1},style:{},message:{default:""},inputStyle:{}},emits:["focus","blur","clear","change","submit","keydown","update:modelValue","hoverin","hoverout"],setup(w,{expose:N,emit:S}){const n=J.createNamespace("input"),a=w,{disabled:d,status:v,message:c,size:z,inputStyle:E}=e.toRefs(a),{mergedDisabled:r,isError:k,mergedStatus:$,mergedSize:q,validate:f}=G.useFormItem({disabled:d,status:v,message:c,size:z}),u=e.ref(!1),h=a.limit>0,I=a.showCounter&&h,B=a.type==="password"&&!a.disabled&&a.visible;let o=e.unref(a.modelValue);const C=e.ref(o.length),s=S,t=e.ref(),i=e.ref(!1),p=e.ref(!1),b=e.ref(o.length>0),m=e.ref(a.type),F=e.computed(()=>m.value==="password"?"eye-slash":"eye"),g=e.computed(()=>b.value&&(a.clearable||a.visible)&&(i.value||p.value)),D=()=>{var l;m.value=((l=t.value)==null?void 0:l.type)==="text"?"password":"text"},T=()=>{t.value.value="",t.value.focus(),y(),s("clear","")},R=()=>{a.disabled||a.readonly||(i.value=!0,f("focus"),s("focus",o))},y=()=>{var l;a.disabled||a.readonly||(o=((l=t.value)==null?void 0:l.value)??"",h&&!u.value&&o.length>a.limit&&(o=o.slice(0,a.limit),t.value.value=o),b.value=o.length>0,C.value=o.length,f("change"),s("update:modelValue",o),s("change",o))},L=()=>{i.value=!1,f("blur"),s("blur",o)},M=()=>{p.value=!0,s("hoverin")},P=()=>{p.value=!1,s("hoverout")},H=()=>{u.value=!0},K=()=>{u.value=!1,y()},j=l=>{l.key==="Enter"&&!u.value&&s("submit"),s("keydown",l)},A=l=>{o=l,s("update:modelValue",o),s("change",o)};return e.watch(()=>a.modelValue,l=>{o=l,s("update:modelValue",o)}),N({inputRef:t,setValue:A}),(l,W)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",e.mergeProps({class:[e.unref(n).b(),e.unref(n).is("prepend",!!l.$slots.prepend),e.unref(n).is("append",!!l.$slots.append),e.unref(n).m(e.unref(q))],style:l.style},l.$attrs,{onMouseenter:M,onMouseleave:P}),[l.$slots.prepend?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass(e.unref(n).e("prepend"))},[e.renderSlot(l.$slots,"prepend")],2)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass([e.unref(n).e("wrapper"),!e.unref(r)&&e.unref(n).em("wrapper",`${e.unref(v)}`),e.unref(n).is("focus",i.value&&!e.unref(r)&&!e.unref(k)),e.unref(n).is("loading",l.loading),e.unref(n).is("readonly",l.readonly),e.unref(n).is("disabled",e.unref(r)),e.unref(k)&&e.unref(n).em("wrapper","danger")])},[l.$slots.prefix?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass(e.unref(n).e("prefix"))},[e.renderSlot(l.$slots,"prefix")],2)):e.createCommentVNode("",!0),e.createElementVNode("input",{ref_key:"inputRef",ref:t,id:l.id,name:l.name,placeholder:l.placeholder,disabled:e.unref(r),readonly:l.readonly,required:l.required,class:e.normalizeClass(e.unref(n).e("inner")),type:m.value,value:e.unref(o),"aria-disabled":e.unref(r),style:e.normalizeStyle(e.unref(E)),onFocus:R,onInput:y,onBlur:L,onCompositionstart:H,onCompositionend:K,onKeydown:j},null,46,O),e.unref(B)||l.clearable&&!e.unref(d)?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass([e.unref(n).e("buttons")])},[e.unref(B)?(e.openBlock(),e.createBlock(e.unref(V),{key:0,onClick:D,class:e.normalizeClass(e.unref(n).is("show",g.value)),icon:F.value},null,8,["class","icon"])):e.createCommentVNode("",!0),l.clearable&&!e.unref(d)?(e.openBlock(),e.createBlock(e.unref(V),{key:1,class:e.normalizeClass(e.unref(n).is("show",g.value)),icon:"close",onClick:T},null,8,["class"])):e.createCommentVNode("",!0)],2)):e.createCommentVNode("",!0),l.showCounter?(e.openBlock(),e.createElementBlock("div",{key:2,class:e.normalizeClass(e.unref(n).e("counter"))},[e.createElementVNode("span",null,e.toDisplayString(C.value),1),e.unref(I)?(e.openBlock(),e.createElementBlock("span",Q," / "+e.toDisplayString(l.limit),1)):e.createCommentVNode("",!0)],2)):e.createCommentVNode("",!0),l.$slots.suffix?(e.openBlock(),e.createElementBlock("span",{key:3,class:e.normalizeClass(e.unref(n).e("suffix"))},[e.renderSlot(l.$slots,"suffix")],2)):e.createCommentVNode("",!0)],2),l.$slots.append?(e.openBlock(),e.createElementBlock("span",{key:1,class:e.normalizeClass(e.unref(n).e("append"))},[e.renderSlot(l.$slots,"append")],2)):e.createCommentVNode("",!0)],16),e.createVNode(e.Transition,{name:"fade"},{default:e.withCtx(()=>[e.unref(c)?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(e.unref(n).em("message",e.unref($)))},e.toDisplayString(e.unref(c)),3)):e.createCommentVNode("",!0)]),_:1})],64))}});module.exports=U;

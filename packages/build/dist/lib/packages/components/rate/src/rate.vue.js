"use strict";const e=require("vue"),z=require("../../../utils/create.js"),y=require("../../icon/index.js"),g=["onAnimationend"],M=e.defineComponent({name:"tl-rate",__name:"rate",props:{count:{default:5},modelValue:{default:0},defaultValue:{default:0},allowHalf:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},grading:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},color:{default:""},icon:{default:"fa-star"},size:{default:"m"}},emits:["update:modelValue","change","hover-change"],setup(h,{emit:V}){const n=z.createNamespace("rate"),o=h,i=V,c=e.ref(o.defaultValue??o.modelValue),u=e.ref(o.defaultValue??o.modelValue),t=e.ref(!1),b=e.computed(()=>Number(o.count)),r=e.computed(()=>Number(c.value)),f=e.computed(()=>Number(u.value)),d=e.computed(()=>o.disabled||o.readonly),C=e.computed(()=>l=>t.value?{animationDelay:`${50*l}ms`}:void 0);e.watch(()=>o.modelValue,l=>{u.value=l});function k(l){o.modelValue&&(i("update:modelValue",l),i("change",l))}function B(){d.value||(c.value=u.value)}function m(l){d.value||(c.value=l,i("hover-change",l))}function v(l){if(!d.value){if(t.value=!0,o.allowClear&&f.value==l){t.value=!1,u.value=0;return}u.value=l,k(l)}}function w(l){t.value&&l==Math.ceil(f.value)-1&&(t.value=!1)}return(l,p)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([e.unref(n).b(),e.unref(n).is("disabled",l.disabled),e.unref(n).m(l.size)]),onMouseleave:p[0]||(p[0]=a=>B())},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(b.value,a=>(e.openBlock(),e.createElementBlock("div",{key:a,class:e.normalizeClass([e.unref(n).e("item"),e.unref(n).is("readonly",l.readonly),e.unref(n).is("disabled",l.disabled),t.value&&r.value>=a&&e.unref(n).em("item","animation")]),style:e.normalizeStyle(C.value(a)),onAnimationend:s=>w(a)},[e.withDirectives(e.createVNode(e.unref(y),{icon:l.icon,class:e.normalizeClass([e.unref(n).em("item","half"),e.unref(n).is("select",r.value+.5==a)]),style:e.normalizeStyle({color:r.value+.5==a?l.color:""}),onMouseenter:s=>m(a-.5),onClick:s=>v(a-.5)},null,8,["icon","class","style","onMouseenter","onClick"]),[[e.vShow,l.allowHalf]]),e.createVNode(e.unref(y),{icon:l.icon,class:e.normalizeClass([e.unref(n).is("select",r.value>=a)]),style:e.normalizeStyle({color:r.value>=a?l.color:""}),onMouseenter:s=>m(a),onClick:s=>v(a)},null,8,["icon","class","style","onMouseenter","onClick"])],46,g))),128))],34))}});module.exports=M;

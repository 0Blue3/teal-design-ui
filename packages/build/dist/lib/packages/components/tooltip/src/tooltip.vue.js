"use strict";const e=require("vue"),$=require("../../../utils/hooks/use-click-outside.js"),M=require("../../../utils/create.js"),B=require("../../../utils/utils.js"),E=require("../../../../node_modules/.pnpm/@floating-ui_vue@1.1.6_vue@3.5.13_typescript@5.8.2_/node_modules/@floating-ui/vue/dist/floating-ui.vue.js"),G=require("./hooks.js"),f=require("../../../../node_modules/.pnpm/@floating-ui_dom@1.6.13/node_modules/@floating-ui/dom/dist/floating-ui.dom.js"),J=["data-popper-placement"],K=e.defineComponent({name:"tl-tooltip",__name:"tooltip",props:{open:{type:Boolean},title:{default:"hello"},trigger:{default:"hover"},color:{},placement:{default:"bottom"},animation:{default:"fade"},arrow:{type:Boolean,default:!0},autoAdjustOverflow:{type:Boolean,default:!1},openDelay:{default:0},closeDelay:{default:0},overlayStyle:{type:[Boolean,null,String,Object,Array],default:()=>({})},zIndex:{}},emits:["update:open","open-change"],setup(q,{expose:O,emit:V}){const d=M.createNamespace("tooltip"),r=q,s=V,P=G.useDefaultSlots(),{placement:g,arrow:h,autoAdjustOverflow:z,trigger:w,overlayStyle:H}=e.toRefs(r),o=e.ref(r.open??!1),m=e.ref(),v=e.ref(),y=e.ref(),k=e.ref(),j=e.computed(()=>{let t=[];return h.value?(t.push(f.offset(9)),t.push(E.arrow({element:y,padding:8}))):t.push(f.offset(3)),z.value&&t.push(f.flip()),t}),N=e.reactive({placement:g,middleware:j.value,whileElementsMounted:f.autoUpdate}),{update:A,floatingStyles:F,middlewareData:c}=E.useFloating(v,m,N),I=e.computed(()=>({background:r.color??""})),R=()=>{o.value?a():n()},T=()=>{o.value=!0,s("open-change",!0),s("update:open",o.value)},U=()=>{o.value=!1,s("open-change",!1),s("update:open",o.value)},b=B.debounce(T,r.openDelay),x=B.debounce(U,r.closeDelay),n=()=>{x.cancel(),b.execute()},a=()=>{b.cancel(),x.execute()};$.useClickOutside(k,()=>{o.value&&(u("click")||u("focus"))&&a()});let l=e.reactive({}),i=e.reactive({}),p=e.reactive({});const D=()=>{!n||!a||(u("click")&&(l.click=R),u("hover")&&(l.mouseenter=n,i.mouseleave=a,p.mouseenter=n,p.mouseleave=a),u("focus")&&(l.focus=n,i.blur=a),u("contextmenu")&&(l.contextmenu=n))};function u(t){return w.value===t||w.value.includes(t)}return e.watch(()=>r.trigger,(t,S)=>{t!=S&&(l={},i={},D())}),e.watch(()=>r.open,t=>{o.value=t}),e.watch(o,t=>{t&&N&&v.value&&m.value&&A()},{flush:"post"}),e.onMounted(()=>{D()}),O({show:n,hide:a}),(t,S)=>(e.openBlock(),e.createElementBlock("div",e.mergeProps({class:e.unref(d).b()},e.toHandlers(e.unref(i),!0),{ref_key:"popperContainerNode",ref:k}),[e.createElementVNode("div",{class:e.normalizeClass(e.unref(d).e("trigger")),ref_key:"triggerNode",ref:v},[e.createVNode(e.unref(P),e.toHandlers(e.unref(l)),null,16)],2),e.createVNode(e.Transition,{name:t.animation},{default:e.withCtx(()=>{var _,C;return[e.withDirectives(e.createElementVNode("div",e.mergeProps(e.toHandlers(e.unref(p),!0),{class:[e.unref(d).e("popper")],style:[e.unref(F),I.value,e.unref(H),{zIndex:t.zIndex}],ref_key:"popperNode",ref:m}),[e.renderSlot(t.$slots,"content",{},()=>[e.createTextVNode(e.toDisplayString(t.title),1)]),e.unref(h)?(e.openBlock(),e.createElementBlock("div",e.mergeProps({key:0,id:"arrow",ref_key:"arrowRef",ref:y},e.toHandlers(e.unref(p),!0),{"data-popper-placement":e.unref(g),style:{backgroundColor:t.color??"",position:"absolute",right:((_=e.unref(c).arrow)==null?void 0:_.x)!=null?`${e.unref(c).arrow.x}px`:"",top:((C=e.unref(c).arrow)==null?void 0:C.y)!=null?`${e.unref(c).arrow.y}px`:""}}),null,16,J)):e.createCommentVNode("",!0)],16),[[e.vShow,o.value]])]}),_:3},8,["name"])],16))}});module.exports=K;

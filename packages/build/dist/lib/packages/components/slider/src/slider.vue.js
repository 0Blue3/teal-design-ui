"use strict";const e=require("vue"),D=require("../../../utils/create.js"),W=require("./useSlider.js"),A=require("./slider-marks.vue.js"),L=e.defineComponent({name:"tl-slider",__name:"slider",props:{modelValue:{default:0},min:{default:0},max:{default:100},step:{default:1},marks:{default:()=>[]},direction:{default:"horizontal"},height:{default:200},disabled:{type:Boolean,default:!1},showInput:{type:Boolean,default:!1}},setup(z,{emit:C}){const o=D.createNamespace("slider"),t=z,{modelValue:u,marks:g,min:S,max:x}=e.toRefs(t),i=e.ref(),_=C,s=e.computed(()=>Array.isArray(u.value)),w=e.computed(()=>t.max-t.min),l=e.ref(0),V=()=>{t.direction==="horizontal"?l.value=i.value?i.value.offsetWidth:0:t.direction==="vertical"&&(l.value=i.value?i.value.offsetHeight:0)};e.onMounted(()=>{V(),window.addEventListener("resize",V)});const k=e.computed(()=>s.value?(u.value[0]||0).toString():"0"),B=e.computed(()=>s.value?(u.value[1]||0).toString():u.value.toString()),y=e.computed(()=>t.direction==="horizontal"?"top":"right"),r=e.ref(0),d=e.ref(0),p=e.computed(()=>{if(s.value){const a=(u.value[0]||0)-t.min;return Math.round(a/w.value*100)/100}else return 0}),f=e.computed(()=>{if(s.value){const a=(u.value[1]||0)-t.min;return Math.round(a/w.value*100)/100}else{const n=u.value;return Math.round(n/w.value*100)/100}}),E=e.computed(()=>t.direction==="horizontal"?{height:"2px"}:t.direction==="vertical"?{height:t.height+"px",width:"2px"}:{}),N=e.computed(()=>t.direction==="horizontal"?{top:0,height:"2px",left:r.value+"px",width:d.value-r.value+"px"}:t.direction==="vertical"?{left:0,width:"2px",bottom:r.value+"px",height:d.value-r.value+"px"}:{}),{moving:h,isEndBtn:M,handleStartMouseDown:R,handleEndMouseDown:P,emitValue:T}=W.useSlider(t,i,l,r,d,s,_);e.watch(p,()=>{h.value||(r.value=p.value*l.value)},{immediate:!0}),e.watch(f,()=>{h.value||(d.value=f.value*l.value)},{immediate:!0}),e.watch(l,()=>{r.value=p.value*l.value,d.value=f.value*l.value},{immediate:!0});function b(n){if(t.disabled)return;let a=n/100;if(s.value){let c=Math.abs(p.value-a),v=Math.abs(f.value-a);c>=v?d.value=a*l.value:r.value=a*l.value}else d.value=a*l.value;T("update:modelValue")}function q(n){if(t.disabled)return;const c=i.value.getBoundingClientRect();if(t.direction==="horizontal"){const v=n.clientX-c.left;let m=Math.round(v/l.value*100);m=Math.round(m/t.step)*t.step,b(m)}else if(t.direction==="vertical"){const v=l.value-(n.clientY-c.top);let m=Math.round(v/l.value*100);m=Math.round(m/t.step)*t.step,b(m)}}return(n,a)=>{const c=e.resolveComponent("tl-tooltip");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([e.unref(o).b(),e.unref(o).is("disabled",n.disabled)])},[e.createElementVNode("div",{ref_key:"runwayRef",ref:i,class:e.normalizeClass(e.unref(o).e("runway")),style:e.normalizeStyle(E.value),onClick:q},[e.createElementVNode("div",{class:e.normalizeClass([e.unref(o).e("bar"),e.unref(o).m(n.direction)]),style:e.normalizeStyle(N.value)},[s.value?(e.openBlock(),e.createBlock(c,{key:0,class:e.normalizeClass([e.unref(o).e("bar-button-start")]),placement:y.value,open:e.unref(h)&&!e.unref(M),trigger:"hover",content:k.value,onMousedown:e.unref(R)},{default:e.withCtx(()=>[e.createElementVNode("div",{class:e.normalizeClass(e.unref(o).e("bar-tooltipSpan"))},null,2)]),_:1},8,["class","placement","open","content","onMousedown"])):e.createCommentVNode("",!0),e.createVNode(c,{class:e.normalizeClass(e.unref(o).e("bar-button-end")),placement:y.value,open:e.unref(h)&&e.unref(M),trigger:"hover",content:B.value,onMousedown:e.unref(P)},{default:e.withCtx(()=>[e.createElementVNode("div",{class:e.normalizeClass(e.unref(o).e("bar-tooltipSpan"))},null,2)]),_:1},8,["class","placement","open","content","onMousedown"])],6)],6),e.createVNode(A,{modelValue:e.unref(g),"onUpdate:modelValue":a[0]||(a[0]=v=>e.isRef(g)?g.value=v:null),direction:n.direction,disabled:n.disabled,height:n.height,"range-min":e.unref(S),"range-max":e.unref(x),"percent-start":p.value,"percent-end":f.value,onPosition:b},null,8,["modelValue","direction","disabled","height","range-min","range-max","percent-start","percent-end"])],2)}}});module.exports=L;

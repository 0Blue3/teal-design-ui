"use strict";const e=require("vue"),L=require("../../../utils/create.js"),z=require("./scrollbar.js"),h=require("../../../../node_modules/.pnpm/@vueuse_core@12.8.2_typescript@5.8.2/node_modules/@vueuse/core/index.js"),x=e.defineComponent({__name:"thumb",props:{vertical:{type:Boolean},always:{type:Boolean},size:{},move:{},ratio:{}},setup(w){const l=L.createNamespace("scrollbar-bar"),o=w,s=e.inject(z.scrollbarContextKey);if(!s)throw new Error("can not inject scrollbar context!");const b=e.computed(()=>o.vertical?{height:o.size,transform:`translateY(${o.move}px)`}:{width:o.size,transform:`translateX(${o.move}px)`});let c=document.onselectstart,a=0;const i=e.ref(!1),m=e.ref(0),v=e.ref(0),u=e.ref(!1),E=t=>{var r,n,p;t.stopPropagation(),!(t.ctrlKey||[1,2].includes(t.button))&&(u.value=!0,(r=window.getSelection())==null||r.removeAllRanges(),t.stopImmediatePropagation(),document.addEventListener("mousemove",d),document.addEventListener("mouseup",f),c=document.onselectstart,document.onselectstart=()=>!1,o.vertical?a=((n=s.wrapEl)==null?void 0:n.scrollTop)??0:a=((p=s.wrapEl)==null?void 0:p.scrollLeft)??0,m.value=t.screenY,v.value=t.screenX)},d=t=>{const r=s==null?void 0:s.wrapEl;if(r)if(o.vertical){const n=t.screenY-m.value;r.scrollTop=a+n*r.scrollHeight/r.clientHeight}else{const n=t.screenX-v.value;r.scrollLeft=a+n*r.scrollWidth/r.clientWidth}},f=()=>{u.value=!1,document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",f),g()},g=()=>{document.onselectstart!==c&&(document.onselectstart=c)};h.useEventListener(e.toRef(s,"scrollbarEl"),"mousemove",()=>{i.value=!0}),h.useEventListener(e.toRef(s,"scrollbarEl"),"mouseleave",()=>{i.value=!1});const y=e.computed(()=>o.ratio===1?!1:o.always?!0:i.value||u.value);return(t,r)=>(e.openBlock(),e.createBlock(e.Transition,{name:`${e.unref(l).e("fade")}`},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass([e.unref(l).b(),e.unref(l).m(t.vertical?"vertical":"horizontal")])},[e.createElementVNode("div",{class:e.normalizeClass(e.unref(l).e("thumb")),style:e.normalizeStyle(b.value),onMousedown:E},null,38)],2),[[e.vShow,y.value]])]),_:1},8,["name"]))}});module.exports=x;

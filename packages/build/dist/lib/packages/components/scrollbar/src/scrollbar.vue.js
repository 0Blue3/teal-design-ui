"use strict";const e=require("vue"),q=require("../../../utils/create.js"),C=require("../../../utils/utils.js"),N=require("./scrollbar.js"),g=require("../../../../node_modules/.pnpm/@vueuse_core@12.8.2_typescript@5.8.2/node_modules/@vueuse/core/index.js"),_=require("./thumb.vue.js"),z=4,S=e.defineComponent({name:"TlScrollbar",__name:"scrollbar",props:{height:{},native:{type:Boolean},always:{type:Boolean,default:!1},noresize:{type:Boolean,default:!1}},emits:["scroll"],setup(B,{expose:H,emit:k}){const a=q.createNamespace("scrollbar"),s=B,W=k,E=e.computed(()=>({height:C.toPx(s.height)})),h=e.shallowRef(),r=e.shallowRef(),f=e.shallowRef(),v=e.ref(0),m=e.ref(0),$=t=>{const o=e.unref(r),l=e.unref(f);if(!o||!l)return;const i=o.offsetHeight-z,u=o.offsetWidth-z;v.value=o.scrollTop*i/l.scrollHeight,m.value=o.scrollLeft*u/l.scrollWidth,W("scroll",t)},d=e.ref(1),y=e.ref(1),w=e.ref("0"),b=e.ref("0"),p=()=>{console.log("窗口变化，更新");const t=e.unref(r);if(!t)return;const o=t.offsetHeight,l=t.offsetWidth,i=o**2/t.scrollHeight,u=l**2/t.scrollWidth;w.value=i+"px",b.value=u+"px",d.value=i/o,y.value=u/l,v.value=t.scrollTop*o/t.scrollHeight,m.value=t.scrollLeft*l/t.scrollWidth};let n,c;return e.watch(()=>s.noresize,t=>{t||s.native?(n==null||n(),c==null||c()):({stop:n}=g.useResizeObserver(f,p),c=g.useEventListener("resize",p))},{immediate:!0}),e.onMounted(p),e.provide(N.scrollbarContextKey,e.reactive({scrollbarEl:h,wrapEl:r})),H({scrollBy:t=>{var o;(o=r.value)==null||o.scrollBy(t)},scrollTo:t=>{var o;(o=r.value)==null||o.scrollTo(t)}}),(t,o)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"$scrollbar",ref:h,class:e.normalizeClass(e.unref(a).b())},[e.createElementVNode("div",{ref_key:"$wrap",ref:r,class:e.normalizeClass([e.unref(a).b("wrap"),e.unref(a).bm("wrap",s.native?"":"defaultHide")]),style:e.normalizeStyle(E.value),onScroll:$},[e.createElementVNode("div",{ref_key:"$content",ref:f,class:e.normalizeClass(e.unref(a).be("wrap","content"))},[e.renderSlot(t.$slots,"default")],2)],38),s.native?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(_,{vertical:"",size:w.value,move:v.value,always:t.always,ratio:d.value},null,8,["size","move","always","ratio"]),e.createVNode(_,{size:b.value,move:m.value,always:t.always,ratio:y.value},null,8,["size","move","always","ratio"])],64))],2))}});module.exports=S;

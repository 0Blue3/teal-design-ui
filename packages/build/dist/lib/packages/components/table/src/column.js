"use strict";const n=require("vue"),v=require("./table.js"),f=require("../../checkbox/index.js");let g=1;const x=n.defineComponent({name:"TlTableColumn",components:{TlCheckbox:f.default},props:v.defaultTableColumnProps,setup(o,{slots:c}){const s=n.getCurrentInstance(),a=n.ref({}),h=`column_${g++}`,u=n.computed(()=>{let e=s.parent;for(;e&&!(e!=null&&e.tableId);)e=e.parent;return e}),i=u.value.store,m=({row:e,column:t,index:d})=>{var C;const l=t.property,r=l&&e[l];return t&&t.type=="checkbox"?n.h(f.default,{checked:i.isSelected(e),onChange(p){i.dispatch("toggleRowSelection",e,p)}}):t&&t.formatter?t.formatter(e,t,r,d):((C=r==null?void 0:r.toString)==null?void 0:C.call(r))||""};return n.onBeforeMount(()=>{a.value={id:h,type:o.type,align:o.align,property:o.property,label:o.label,formatter:o.formatter,renderCell:e=>{let t=null;if(c.default){const d=c.default(e);t=d.some(l=>l.type!==Comment)?d:m(e)}else t=m(e);return n.h("div",{class:["cell"]},[t])},renderHeader:({column:e,index:t})=>{const d=c.header;let l=null;return e.type==="checkbox"?l=n.h(f.default,{checked:i.state.isAllSelected.value,indeterminate:i.state.selection.value.length>0&&!i.state.isAllSelected.value,onChange:r=>{i.dispatch("toggleAllSelection",r)}}):l=e.label,n.h("div",{class:"cell text-"+o.align},[d?d({column:e,index:t}):l])}}}),n.onMounted(()=>{var l;const e=(l=u.value.refs.hiddenColumns)==null?void 0:l.children,t=()=>Array.from(e).findIndex(r=>r==s.vnode.el);a.value.getColumnIndex=t,t()>-1&&u.value.store.dispatch("insertColumn",a.value)}),n.onBeforeUnmount(()=>{u.value.store.dispatch("removeColumn",a.value)}),{columnId:h,columnConfig:a}},render(){var c,s;const o=(s=(c=this.$slots).default)==null?void 0:s.call(c,{row:{},column:{},$index:-1});return o?n.h("div",o):n.h("div",[])}});module.exports=x;
